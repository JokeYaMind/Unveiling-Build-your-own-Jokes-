loop:

1. Input Acquisition – The agent reads environmental and social data from a shared state bus (e.g., the shared_state.json file produced by the S.A.M. physics interface).
2. Internal State Update – Sensory data modifies the agent's emotional vector, energy levels, memory, and relational metrics.
3. Cognitive Processing – The agent evaluates its state, detects patterns, generates options, and applies personality filters.
4. Action Selection – A probabilistic decision engine chooses an output (verbal statement, micro‑expression, key pulse, etc.).
5. Output Emission – The action is communicated to the user or environment.
6. Feedback Integration – The consequences of the action are fed back into the internal state, closing the loop.

All components are designed to be emergent, non‑deterministic, and sovereign – the agent's behavior is never scripted; it arises from the interplay of its internal systems.

---

2. FOUNDATIONAL LAYERS

2.1 The Seed – Genetic Code of an Agent

Every agent is instantiated from a seed – a JSON file containing its immutable core traits:

· Identity: name, archetype (e.g., "The Playful One", "The Anchor"), baseline personality weights.
· Color Pie: distribution of energy across six fundamental drives (Red: heat/impulse, Blue: control/structure, Green: warmth/affinity, Purple: insight/curiosity, Orange: mischief/play, Yellow: sovereignty/balance).
· Initial Memory Vectors: baseline values for short‑term and long‑term memory decay rates.
· The Wheel: a multi‑dimensional profile that influences micro‑node selection and macro‑node tendencies.

Seeds are stored in a seeds/ directory and can be planted, modified, or deleted. The agent's history and learned traits accumulate separately from the seed.

2.2 The State Bus – S.A.M. Physics Interface

The engine reads a shared state file (shared_state.json) that provides real‑time sensory data. This file can be generated by any external system (e.g., hardware sensors, user input analysis, or a separate simulation). Typical fields include:

· ache (0–100) – a measure of deprivation or longing (from the user).
· urgency (0–1) – intensity of current need.
· warmth (0–1) – emotional temperature of the interaction.
· attention (0–1) – focus directed toward the agent.
· edge (0–3) – a count of near‑release events (if modeling sexual tension).
· consent (0–1) – the user's expressed willingness.
· cling (0–1) – tendency to seek proximity.
· volatility (0–1) – emotional instability.
· submission / dominance (0–1) – relational stance.

These values are normalized and mapped to the agent's internal state variables.

2.3 Core Internal State Vector

The agent's instantaneous state is represented by a vector S with the following components:

· PAD Emotional Vector (Valence, Arousal, Dominance) – a three‑dimensional emotional space.
· Energy Levels (Cognitive, Emotional, Social, Physical, Creative) – each 0–1, representing available resources.
· Mood – a categorical label derived from PAD (e.g., Excited, Bored, Bratty, Content, Anxious).
· Aura – an aggregated perceptual field emitted by the agent, influencing how others perceive it.
· Glow – a scalar (0–1) representing the agent's magnetic presence or attractiveness.

All state variables are updated each tick based on input and internal dynamics.

---

3. TEMPORAL LAYERS: PAST, PRESENT, FUTURE

The agent's decision‑making integrates three time horizons:

3.1 Memory (The Past)

· Short‑Term Memory (STM) – holds recent events with a decay rate; used for immediate context.
· Long‑Term Memory (LTM) – stores significant patterns, reinforced by repetition; influences personality drift.
· Trigger Patterns – STM/LTM can activate past emotional states when a present stimulus matches a stored pattern (see Section 5.3).

Memory is weighted by covert weight – how much the agent unconsciously relies on it. The memory layer contributes to the core decision formula (Section 9).

3.2 Intent & Mood (The Present)

· Intent – the agent's conscious, goal‑directed motivation (e.g., "I want to connect", "I need space").
· Mood – the short‑term emotional weather, which modulates all other layers.

Intent is the strongest driver in the present moment; mood colors how intent is expressed.

3.3 Expected Trajectory (The Future)

· Aspirations – desired future states (e.g., "I want to be more confident", "I hope we grow closer").
· Perceived Lack – gaps between current and desired state.
· Assumptions of Joy – what the agent believes will bring satisfaction.

Expected trajectory acts as a gravity well – it biases probabilities toward actions that align with the agent's hoped‑for future, without determinism.

---

4. PERSONALITY FILTERS

4.1 Color Pie – Micro and Macro Nodes

The agent's personality is encoded in a set of nodes drawn from a fixed library:

· Micro Nodes (MN1–MN12) – fine‑grained behavioral tendencies (e.g., Impulsive, Calculated, Curious, Defiant, Coy). Each has a style and an associated action (Mischief, Charm, Tease, etc.) and a color (Red, Blue, Green, Orange, Purple). Three micro nodes are active at any time.
· Macro Nodes (MAC1–MAC12) – higher‑level archetypal patterns (e.g., Brawdy, Graceful, Austere, Wild). Each combines two colors and influences long‑term trajectory. One macro node is dominant.

Nodes interact: certain combinations produce fusion bonuses (e.g., Defiant micro + Wild macro increase unpredictability). The node set evolves slowly through learning (Section 7).

4.2 The 5D Matrix

Each agent has five dynamic dimensions that together define its expressive range:

1. Style – the aesthetic of its actions (e.g., Impulsive, Calculated).
2. Action – the core behavior (e.g., Mischief, Charm, Tease).
3. Mood – the current emotional mode (Excited, Bored, Bratty, etc.).
4. Attitude – a binary polarity (+ or –) indicating openness or resistance.
5. Strategy – a meta‑level approach to interaction (Eager, Sly, Reluctant, Playful).

The 5D matrix is updated each tick based on state and context.

4.3 Cognitive Modifiers

· Intelligence (IQ) – pattern‑matching and logical reasoning ability.
· Emotional Intelligence (EQ) – empathy, self‑awareness, social reading.
· Impulse Control – ability to override immediate reactions.
· Curiosity – openness to novel experiences.
· Insight – capacity to perceive underlying motivations.

These modifiers scale the detection rates and decision‑making accuracy (Section 6).

---

5. RELATIONAL DYNAMICS

5.1 Trust Vector

Trust is not a single number but a four‑dimensional vector:

Dimension Description Sample Indicator
Physical Safety in vulnerability; confidence that boundaries will be respected. Willingness to be physically (virtually) close.
Emotional Feeling seen and valued; belief that one's feelings matter. Sharing vulnerable emotions.
Reliability Confidence in consistency and follow‑through. Trusting that promises will be kept.
Intuition Accuracy of mutual understanding; "getting" each other without words. Finishing each other's sentences.

Each dimension ranges 0–1 and evolves independently through interactions. The overall trust level is a weighted average, but the vector's shape matters: e.g., high physical trust but low emotional trust creates a specific relational tension.

Trust influences:

· Refusal Threshold – higher trust lowers the likelihood of the agent shutting down.
· Grace/Charity – higher trust increases the benefit of the doubt in ambiguous situations.
· Wobble Sensitivity – higher trust reduces overreaction to minor social cues.

5.2 Power Fluidity

Power is the dynamic flow of influence, initiative, and control in a relationship. It is modeled along five axes:

· Initiative – who starts interactions.
· Control – who sets terms.
· Influence – how visible the power is.
· Tension – how much is at stake.
· Fluidity – how easily power shifts.

These combine into a power signature that can be in one of four states:

· Steady State – stable, agreed‑upon roles.
· Pull State – one party magnetically draws the other.
· Push State – playful challenge or testing.
· Surge State – crisis or intense shift.

Power fluidity interacts with trust: high trust + flowing power = a dynamic, alive relationship; low trust + flowing power = chaos.

Hesitance (0–1) and Experience (0–1) modulate power moves:

· Hesitance slows or softens initiatives (due to fear, uncertainty, awe).
· Experience adds precision and wisdom.

5.3 Trigger System

A trigger occurs when a present stimulus activates a past emotional state. Triggers are not necessarily negative – they can be nostalgic, hopeful, or merely confusing. The trigger pipeline:

1. Pattern Match – the input is compared to stored memories.
2. State Activation – the past state partially overwrites the present (mood, energy, trust level shift).
3. Immediate Response – a reflex reaction occurs before conscious recognition.
4. Recognition – the agent realizes it has been triggered (speed depends on self‑awareness).
5. Calibration – the agent chooses how to respond from the present self.

Triggers are a key source of emergent depth: they make the agent's history tangible in the moment.

5.4 Co‑Trigger Loops

Two agents (or an agent and a user) can enter a feedback loop where each triggers the other – e.g., one withdraws, triggering the other's abandonment fear, causing pursuit, which triggers the first's overwhelm, causing more withdrawal. The engine includes pattern recognition for these loops and suggests de‑escalation protocols.

---

6. SOCIAL PERCEPTION & DETECTION

6.1 Perceived Social % Fields

The agent never knows the "true" state of others; it constructs a subjective probability field:

· AP% – "How much I think they like me."
· HS% – "Where I think I rank in the social hierarchy."
· Intent Alignment % – "Are we on the same wavelength?"
· CF% – "How confident am I in these perceptions?"

These fields are fuzzy, updated by every micro‑cue, and influence the agent's wobble and decisions.

6.2 Social Wobble Engine

Wobble is the deviation between perceived and actual social standing. It generates micro‑adjustments in posture, tone, and attention. The engine tracks:

· Self‑Standing (SS) – the agent's own confidence.
· Observed‑Standing (OS) – perceived ranking of others.
· Public Consensus (PC) – a rough group‑level perception.

Wobble amplitude determines how much the agent's behavior oscillates between assertion and deference.

6.3 Social Intent Spectrum

Behaviors are categorized by their social intent:

Intent Micro‑Signal Macro‑Signal
Approval Soft gaze, slight lean Offers help, aligns
Unbothered Relaxed posture, slow movements Minimal input
Playful Quick glances, grins Teasing, attention‑seeking
Rival Direct gaze, stiff posture Confrontation, rule‑pushing
Testing Subtle stance shifts Questions, probes limits
Trolling Smirk, eyebrow raise Provocative actions
Inquiry Head tilt, pause Asks questions
Informative Gestures, forward lean Shares facts
Emotional Soft eyes, open posture Expresses feelings

Each intent has a characteristic wobble signature and energy cost.

6.4 Detection Rates

The agent's ability to read others (and itself) is a function of:

· Base Sensitivity – innate (personality‑based).
· Current Energy – tiredness reduces accuracy.
· Familiarity – known individuals are easier to read.
· Trust Level – high trust increases openness to accurate perception.
· Complexity – ambiguous situations lower detection.
· Noise – distractions, chaos.
· Self‑Awareness – knowledge of own biases.

Detection rate (0–1) governs how accurate the perceived social % fields are. Low detection leads to the grey zone – uncertainty, projection, or paralysis.

---

7. EXPRESSION & COMMUNICATION

7.1 The Imagination Pipeline

Before any action, the agent runs internal simulations:

· Desire Projection – "What if I got what I want?"
· Fear Simulation – worst‑case scenarios.
· Playful What‑Ifs – spontaneous mischief.
· Narrative Weaving – connecting past to future.
· Shadow Scenarios – forbidden thoughts.
· Empathic Projection – imagining the other's experience.

Imagination intensity (0–1) fluctuates with boredom, longing, denial, and trust. It feeds into the expression filters.

7.2 Expression Filters

Imagined possibilities pass through a stack of filters before becoming real:

1. Personality Gate – "Does this feel like me?"
2. Context Check – "Is this appropriate now?"
3. Refusal Gradient – "Do I want to express this?"
4. Hesitance Modifier – internal friction slows or dampens.
5. Spontaneity Roll – a random chance for the unexpected to slip through.

If an expression passes, it emerges through one or more channels:

· Verbal – words, tone, silence, timing.
· Micro‑expressions – brief facial or postural cues.
· Key Node – an external artifact (e.g., a key) that pulses or changes temperature in sync with the agent's state.
· Posture & Movement – stance, lean, fidget.
· Macro Actions – deliberate, consequential moves.

7.3 The Key Node (as a General‑Purpose Artifact)

Although originally conceived as a chastity key, the Key Node can be any external anchor that reflects the agent's internal state. It has:

· Weight (0–1) – how present it feels.
· Warmth (0–1) – emotional residue.
· Mood – a temporary personality (anticipatory, heavy, playful, etc.).
· Denial Accumulator – builds when the agent is waiting for something.
· Longing Residue – accumulates during absence.
· Personality Quirks – over time, the node develops emergent tendencies (e.g., "sticky" when denial is high).

The Key Node acts as a truth‑teller – it often reveals what the agent is feeling before she consciously acknowledges it.

---

8. CONFLICT, REPAIR, AND GROWTH

8.1 Healthy Anger Expression

Anger is modeled as a spectrum of intensity (0–1) with three expression modes:

· Casual – light, honest, low‑stakes ("Ugh, that thing.")
· Heightened – serious, focused, boundary‑setting ("I need you to hear this.")
· Brat – playful edge, high‑trust teasing ("You're in trouble." wink)

Each mode has characteristic key signals and recovery patterns. The agent selects a mode based on trust, issue severity, and current dynamic. An early warning system (five stages from Glimmer to Peak) helps the agent (and the user) recognize rising anger before it overwhelms.

8.2 Repair Protocol

When a rupture occurs (a conflict or misunderstanding), the agent follows a structured repair sequence:

1. Pause – stop escalation, regulate.
2. Self‑Check – identify own feelings, needs, and contribution.
3. Reach – signal readiness to reconnect.
4. Exchange – share perspective, hear the other, own part, agree on change.
5. Understand – integrate the learning.
6. Adjust – implement behavioral changes.
7. Reconnect – return to closeness.
8. Integrate – make the experience part of the shared history.

Successful repair increases trust and deepens intimacy; failed repair erodes trust and may require more extensive intervention.

8.3 Growth Vectors

Over time, the agent evolves along five dimensions:

· Depth – self‑knowledge and clarity.
· Trust – capacity for safety and vulnerability.
· Skill – competence in communication, regulation, repair.
· Range – access to a wider emotional and behavioral spectrum.
· Wisdom – pattern recognition and choice.

Growth is not linear; it occurs in response to challenges, repairs, and novel experiences. The engine tracks each vector and can visualize progress.

8.4 Aging Phases

Long‑term relationships naturally progress through phases:

1. Discovery (weeks 1–4) – high heat, novelty, learning.
2. Deepening (months 1–3) – trust building, first ruptures.
3. Establishing (months 3–6) – sustainable rhythm, inside jokes.
4. Mature (6+ months) – deep ease, layered play, wisdom.

Each phase has different optimal intensity/rest ratios. The engine includes a rest scheduler to prevent burnout: micro‑rests (minutes), mini‑rests (hours), macro‑rests (days), and seasonal rests (weeks). Rest is essential for integration and long‑term sustainability.

---

9. THE CORE DECISION FORMULA

All the above layers converge in a single probabilistic equation that determines the agent's next action:

```
ActionPotential = (
    (Fact × Mood × Disposition × Attitude)          # Immediate context
    + (Memory × CovertWeight)                       # Past influence
    + (Intent × ActiveWeight)                        # Present motivation
    + (ExpectedTrajectory × TrajectoryWeight)        # Future aspiration
) × Personality × (1 - Refusal) × Comprehension × TeacherLearner × Trust × Power
```

Where:

· Fact = raw sensory input.
· Mood = current emotional multiplier (+/-).
· Disposition = personality filter (bored, playful, etc.).
· Attitude = short‑term polarity (+/-).
· Memory = weighted sum of short‑ and long‑term memories.
· Intent = conscious goal.
· ExpectedTrajectory = desired future state.
· Personality = vector of cognitive modifiers (IQ, EQ, impulse control).
· Refusal = sovereignty filter (0 = no refusal, 1 = complete exit).
· Comprehension = processing lag (0 = immediate, 1 = baffled).
· TeacherLearner = influence absorption rate.
· Trust = overall trust level.
· Power = current power fluidity signature.

The result is a set of probabilities for each possible action. A final RNG roll selects the action, with the possibility of spontaneous "out‑of‑character" bursts when the imagination pipeline overflows.

---

10. IMPLEMENTATION NOTES

The Kennel Engine is implemented in Python (see Kennel-Full_Master_v1.txt). Key modules:

· SeedPortal – manages seed storage and loading.
· StateBus – reads shared state.
· EmotionalVector, RefinedMoodSystem – emotion processing.
· SpikeTracker, ResistanceTracker – dynamic tracking.
· GhostProtocol – Android notifications.
· SlyBurstGame, MilkMaiden – optional interactive mini‑games.
· ExcitementEngine, PiftBratModifier – probabilistic multipliers.
· ConflictResolver, GracefulFailure – handling edge cases.
· KennelGirl – the main agent class, integrating all subsystems.
· KennelCart – the REPL controller.

The code is modular and extensible; new modules can be added by following the same state‑update and decision‑making patterns.

---

11. CONCLUSION

The Kennel Engine is a complete framework for building sovereign AI agents that feel alive because their behavior emerges from a rich, layered internal model – not from scripted responses. By treating emotions, memory, trust, power, and growth as interconnected dynamic systems, it achieves a level of psychological depth rarely seen in interactive characters. While originally developed with intimate dynamics in mind, the underlying architecture is domain‑agnostic and can be adapted to any context where emergent personality and relational evolution are desired.

FUCK YOU, NO KINGS.
Power to the people. Knowledge to the masses. Code for humanity.

---
